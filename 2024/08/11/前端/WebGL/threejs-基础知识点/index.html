<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="wawn">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://wawnwn.github.io/2024/08/11/前端/webgl/threejs-基础知识点/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="官方文档：https:&#x2F;&#x2F;threejs.org&#x2F;docs&#x2F;index.html#manual&#x2F;zh&#x2F;introduction&#x2F;Creating-a-scene">
<meta property="og:type" content="article">
<meta property="og:title" content="threejs 基础知识点">
<meta property="og:url" content="http://wawnwn.github.io/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/index.html">
<meta property="og:site_name" content="wawn&#39;s blog">
<meta property="og:description" content="官方文档：https:&#x2F;&#x2F;threejs.org&#x2F;docs&#x2F;index.html#manual&#x2F;zh&#x2F;introduction&#x2F;Creating-a-scene">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://wawnwn.github.io/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/1.png">
<meta property="og:image" content="http://wawnwn.github.io/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/2.png">
<meta property="og:image" content="http://wawnwn.github.io/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/3.png">
<meta property="og:image" content="http://wawnwn.github.io/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/4.png">
<meta property="article:published_time" content="2024-08-11T12:20:20.000Z">
<meta property="article:modified_time" content="2024-08-16T11:55:14.495Z">
<meta property="article:author" content="wawnwn">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://wawnwn.github.io/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/1.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/null" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/null">
    <meta name="theme-color" content="#6c9897">
    <link rel="shortcut icon" href="/null">
    <!--- Page Info-->
    
    <title>
        
            threejs 基础知识点 -
        
        wawn&#39;s blog
    </title>

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">


    <!--- Inject Part-->
    

    
<link rel="stylesheet" href="/css/style.css">


    
        
<link rel="stylesheet" href="/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/fonts/GeistMono/geist-mono.css">

    
<link rel="stylesheet" href="/fonts/Geist/geist.css">

    <!--- Font Part-->
    
    
    
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    
        <link href="" rel="stylesheet">
    
    
    

    <script id="hexo-configurations">
    window.config = {"hostname":"wawnwn.github.io","root":"/","language":"zh-CN","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":true,"link_icon":true,"title_alignment":"left","headings_top_spacing":{"h1":"5rem","h2":"4rem","h3":"2.8rem","h4":"2.5rem","h5":"2.2rem","h6":"2rem"}},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","highlight_theme":{"light":"github","dark":"vs2015"},"font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":{"enable":true,"default":"cc_by_nc_sa"},"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wall.webp","skip_dirs":[]}},"colors":{"primary":"#6c9897","secondary":null,"default_mode":"light"},"global":{"fonts":{"chinese":{"enable":true,"family":"Noto Sans SC","url":"https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"},"english":{"enable":true,"family":null,"url":null},"title":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":true,"percentage":true},"website_counter":{"url":"https://cn.vercount.one/js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"preloader":false,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wall.webp","dark":"/images/dark.jpg"},"title":"wawn's blog","subtitle":{"text":["因为孤独因为你本身而千变万化"],"hitokoto":{"enable":false,"show_author":false,"api":"https://v1.hitokoto.cn"},"typing_speed":null,"backing_speed":null,"starting_delay":null,"backing_delay":null,"loop":false,"smart_backspace":false},"text_color":{"light":"#F0F8FF","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":"Noto Sans SC","url":"https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap"},"social_links":{"enable":true,"style":"default","links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":"ye50932510@gmail.com"},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null,"lrc":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.7.1","navbar":{"auto_hide":false,"color":{"left":"#87CEFA","right":"#367df7","transparency":35},"width":{"home":"1200px","pages":"1000px"},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Photo":{"path":"/masonry/","icon":"fa-regular fa-link"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"cloud"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"show_on_mobile":true,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","excerpt_length":200,"categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/8/17 11:45:14"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
<!--        <span class="swup-progress-icon">-->
<!--            <i class="fa-solid fa-circle-notch fa-spin"></i>-->
<!--        </span>-->
    
</div>



<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container px-6 md:px-12">

    <div class="navbar-content ">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                wawn&#39;s blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/"
                                        >
                                    <i class="fa-regular fa-house fa-fw"></i>
                                    首页
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/archives"
                                        >
                                    <i class="fa-regular fa-archive fa-fw"></i>
                                    归档
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            

                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class=""
                                   href="/masonry/"
                                        >
                                    <i class="fa-regular fa-link fa-fw"></i>
                                    PHOTO
                                    
                                </a>

                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i>
                    </div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile sheet -->
    <div class="navbar-drawer h-screen w-full absolute top-0 left-0 bg-background-color flex flex-col justify-between">
        <ul class="drawer-navbar-list flex flex-col px-4 justify-center items-start">
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/"
                        >
                            <span>
                                首页
                            </span>
                            
                                <i class="fa-regular fa-house fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/archives"
                        >
                            <span>
                                归档
                            </span>
                            
                                <i class="fa-regular fa-archive fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            
                
                    

                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full "
                           href="/masonry/"
                        >
                            <span>
                                PHOTO
                            </span>
                            
                                <i class="fa-regular fa-link fa-sm fa-fw"></i>
                            
                        </a>
                        

                        
                    </li>
            

            
            
                
                    
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/tags"
                        >
                            <span>Tags</span>
                            <i class="fa-regular fa-tags fa-sm fa-fw"></i>
                        </a>
                    </li>
                
                    
                    <li class="drawer-navbar-item text-base my-1.5 flex flex-col w-full">
                        <a class="py-1.5 px-2 flex flex-row items-center justify-between gap-1 hover:!text-primary active:!text-primary text-2xl font-semibold group border-b border-border-color hover:border-primary w-full active"
                           href="/categories"
                        >
                            <span>Categories</span>
                            <i class="fa-regular fa-folder fa-sm fa-fw"></i>
                        </a>
                    </li>
                
            
        </ul>

        <div class="statistics flex justify-around my-2.5">
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/tags">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">2</div>
        <div class="label text-third-text-color text-sm">标签</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/categories">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">20</div>
        <div class="label text-third-text-color text-sm">分类</div>
    </a>
    <a class="item tag-count-item flex flex-col justify-center items-center w-20" href="/archives">
        <div class="number text-2xl sm:text-xl text-second-text-color font-semibold">60</div>
        <div class="label text-third-text-color text-sm">文章</div>
    </a>
</div>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container flex relative justify-between box-border w-full h-full">
    <div class="article-content-container">

        <div class="article-title relative w-full">
            
                <div class="w-full flex items-center pt-6 justify-start">
                    <h1 class="article-title-regular text-second-text-color tracking-tight text-4xl md:text-6xl font-semibold px-2 sm:px-6 md:px-8 py-3">threejs 基础知识点</h1>
                </div>
            
            </div>

        
            <div class="article-header flex flex-row gap-2 items-center px-2 sm:px-6 md:px-8">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/images/head.webp">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">wawn</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv4</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2024-08-11 20:20:20</span>
        <span class="mobile">2024-08-11 20:20:20</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2024-08-16 19:55:14</span>
            <span class="mobile">2024-08-16 19:55:14</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/categories/WebGL/">WebGL</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/categories/WebGL/threejs/">threejs</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>6.2k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>25 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body px-2 sm:px-6 md:px-8 pb-8">
            <p>官方文档：<a class="link" target="_blank" rel="noopener" href="https://threejs.org/docs/index.html#manual/zh/introduction/Creating-a-scene">https://threejs.org/docs/index.html#manual/zh/introduction/Creating-a-scene <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<span id="more"></span>

<h1 id="1-threejs-简介"><a href="#1-threejs-简介" class="headerlink" title="1 threejs 简介"></a>1 threejs 简介</h1><p>Three.js 是一个流行的 JavaScript 库，用于在浏览器中创建和显示 3D 图形。它基于 WebGL，一个浏览器支持的 3D 图形 API，使得开发者能够子啊网页上创建复杂的 3D 场景和交互体验。</p>
<p>Three.js 提供了丰富的功能和工具，让开发者能够轻松地创建 3D 对象、设置灯光、添加动画、处理用户交互等。它支持多种 3D 格式的导入，如 OBJ、GLTF 等，也支持自定义的材质和着色器。</p>
<h1 id="2-threejs-安装"><a href="#2-threejs-安装" class="headerlink" title="2 threejs 安装"></a>2 threejs 安装</h1><p>通过 npm 安装 Three.js</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># three.js</span><br><span class="line">npm install three --save</span><br><span class="line"></span><br><span class="line">// 指定版本号</span><br><span class="line">npm install three@0.128.0</span><br><span class="line"></span><br><span class="line"># vite</span><br><span class="line">npm install --save-dev vite</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>安装时项目中新转增了 node_modules&#x2F; 和 package.json，它们是什么？</p>
<ul>
<li>npm 使用 package.json 来描述你已经安装的每个依赖项的版本。如果有其他人和你一起开发项目，他们只需运行 npm install 就能安装每个依赖项的原始版本。如果你在使用版本控制器（如：Git、SVN）来控制代码版本，那么 package.json 应该被提交。</li>
<li>npm 将每个依赖项的代码放在 node_modules&#x2F; 下的文件夹中。当 Vite 构建应用程序时，它会看到“three”的导入，并自动从该文件夹中提取 three.js 文件。node_modules&#x2F; 文件夹仅在开发过程中使用。</li>
</ul>
</blockquote>
<h1 id="3-threejs-初始化"><a href="#3-threejs-初始化" class="headerlink" title="3 threejs 初始化"></a>3 threejs 初始化</h1><h2 id="3-1-创建-dom-挂载"><a href="#3-1-创建-dom-挂载" class="headerlink" title="3.1 创建 dom 挂载"></a>3.1 创建 dom 挂载</h2><p>如果将 Three.js 渲染的三维效果展示到电脑页面，页面需要存在一个挂载三维模型的 Dom 节点，因此我们需要在页面展示三维模型的地方创建一个 Dom，来挂载三维模型场景。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--创建一个div，用于展示三维模型--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;edThreeBox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ed-three-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取dom</span></span><br><span class="line"><span class="keyword">let</span> dom = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">edThreeBox</span></span><br><span class="line">或</span><br><span class="line"><span class="keyword">let</span> dom = <span class="variable language_">document</span>.<span class="title function_">getElementByld</span>(<span class="string">&#x27;ed-three-box&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="3-2-Three-js-创建场景-Scene"><a href="#3-2-Three-js-创建场景-Scene" class="headerlink" title="3.2 Three.js 创建场景 Scene"></a>3.2 Three.js 创建场景 Scene</h2><p>把三维场景 Scene 对象理解为虚拟的 3D 场景，用来表示模拟生活中的真实三维场景，或者说三维世界。后期所有涉及展示的三维模型，包括但不限于模型、光线、辅助线全部添加到场景中方可进行展示。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入场景</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Scene</span>&#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 3D 场景对象 Scene</span></span><br><span class="line"><span class="keyword">const</span> scene = <span class="keyword">new</span> <span class="title class_">Scene</span>()</span><br></pre></td></tr></table></figure></div>

<h2 id="3-3-Three-js-创建透视投影相机-PerpectiveCamera"><a href="#3-3-Three-js-创建透视投影相机-PerpectiveCamera" class="headerlink" title="3.3 Three.js 创建透视投影相机 PerpectiveCamera"></a>3.3 Three.js 创建透视投影相机 PerpectiveCamera</h2><p>Three.js 提供了正投影相机 OrthographicCamera(opens new window) 和透视投影相机 PerspectiveCamera(opens new window)。</p>
<p>透视投影相机 PerspectiveCamera 本质上就是在模拟人眼观察这个世界的规律。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入透视投影相机</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PerspectiveCamera</span> &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建透视投影相机</span></span><br><span class="line"><span class="keyword">let</span> camera = <span class="keyword">new</span> <span class="title class_">PerspectiveCamera</span>(<span class="number">50</span>, dom.<span class="property">offsetWidth</span> / dom.<span class="property">orffsetHeight</span>, <span class="number">1</span>, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置相机位置</span></span><br><span class="line">camera.<span class="property">position</span>/<span class="title function_">set</span>(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置相机的拍摄坐标</span></span><br><span class="line">camera.<span class="title function_">lootAt</span>(<span class="keyword">new</span> <span class="title class_">Vector3</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br></pre></td></tr></table></figure></div>

<h2 id="3-4-Three-js-创建渲染器-WebGLRenderer"><a href="#3-4-Three-js-创建渲染器-WebGLRenderer" class="headerlink" title="3.4 Three.js 创建渲染器 WebGLRenderer"></a>3.4 Three.js 创建渲染器 WebGLRenderer</h2><p>WebGLRenderer 是 Three.js 中的一个关键组件，它的主要作用是将场景和相机渲染成二维图片并显示在指定的 HTML 元素（通常是元素）上。WebGLRenderer 实现了 WebGL 的接口，并利用 GPU 硬件加速来提高渲染性能。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入渲染器</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">WebGLRenderer</span> &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化渲染器</span></span><br><span class="line"><span class="keyword">let</span> renderer = <span class="keyword">new</span> <span class="title class_">WebGLRenderer</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把渲染结果挂载到 dom 节点</span></span><br><span class="line">dom.<span class="title function_">appendchild</span>(renderer.<span class="property">domElement</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置渲染器大小</span></span><br><span class="line">renderer.<span class="title function_">setSize</span>(dom.<span class="property">offsetWidth</span>, dom.<span class="property">offsetHeight</span>, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行渲染操作</span></span><br><span class="line">renderer.<span class="title function_">render</span>(scene, camera)</span><br></pre></td></tr></table></figure></div>

<h1 id="4-Threejs-模型"><a href="#4-Threejs-模型" class="headerlink" title="4 Threejs 模型"></a>4 Threejs 模型</h1><p>场景、相机初始化完成之后，可以向场景中添加一个简单的模型进行展示。在此之前需要了解三个概念：集合体（物体形状）、材质（物体外观）、网络模型（物体）。</p>
<h2 id="4-1-常用几何体"><a href="#4-1-常用几何体" class="headerlink" title="4.1 常用几何体"></a>4.1 常用几何体</h2><img lazyload src="/images/loading.svg" data-src="/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/1.png" class>

<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BoxGeometry：长方体</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="title class_">BoxGeometry</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// SphereGeometry：球体</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="title class_">SphereGeometry</span>(<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// CylinderGeometry：圆柱</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="title class_">CylinderGeometry</span>(<span class="number">50</span>,<span class="number">50</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// PlaneGeometry：矩形平面</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="title class_">PlaneGeometry</span>(<span class="number">100</span>,<span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//CircleGeometry：圆形平面</span></span><br><span class="line"><span class="keyword">const</span> geometry = <span class="keyword">new</span> <span class="title class_">CircleGeometry</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure></div>

<h2 id="4-2-常用材质"><a href="#4-2-常用材质" class="headerlink" title="4.2 常用材质"></a>4.2 常用材质</h2><img lazyload src="/images/loading.svg" data-src="/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/2.png" class>

<p>设置材质：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入材质，这种材质不受光照的影响</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MeshBasicMaterial</span> &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个材质对象 Material</span></span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>, <span class="comment">// 0xff0000 设置材质颜色为红色</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置模型材质两面可见</span></span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>, </span><br><span class="line">    <span class="attr">side</span>: <span class="title class_">DoubleSide</span>, <span class="comment">// 设置模型两面可见</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<p>单双面设置：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>THREE.FrontSide</td>
<td>背面</td>
</tr>
<tr>
<td>THREE.BackSide</td>
<td>前面</td>
</tr>
<tr>
<td>THREE.DoubleSide</td>
<td>双面</td>
</tr>
</tbody></table>
<p>如果是平面，我们可以根据需要设置背面可见，或者两面可见。但是对于立方体，如果不需要进入模型内部查看的话，没有必要设置双面可见（影响渲染效率，消耗计算机性能）。</p>
<h2 id="4-3-Threejs-网格模型-Mesh"><a href="#4-3-Threejs-网格模型-Mesh" class="headerlink" title="4.3 Threejs 网格模型 Mesh"></a>4.3 Threejs 网格模型 Mesh</h2><p>实际生活中有各种各样的物体，在 threejs 中可以通过网格模型 Mesh（opens new window）表示一个虚拟的物体，比如一个箱子、一座房子。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入网格模型</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Mesh</span> &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个参数分别为几何体 geometry、材质 material</span></span><br><span class="line"><span class="keyword">const</span> mesh = <span class="keyword">new</span> <span class="title class_">Mesh</span>(geometry, material); <span class="comment">// 网格模型对象 Mesh</span></span><br></pre></td></tr></table></figure></div>

<p>创建了几何体、材质、网格模型后，需要将创建的网格模型添加到场景就可以在页面展示三维模型。</p>
<p>场景存在一个 add() 方法，可通过该方法将模型添加到场景。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将网格模型添加到场景</span></span><br><span class="line">scene.<span class="title function_">add</span>(mesh);</span><br></pre></td></tr></table></figure></div>

<h1 id="5-Threejs-渲染场景"><a href="#5-Threejs-渲染场景" class="headerlink" title="5 Threejs 渲染场景"></a>5 Threejs 渲染场景</h1><p>通过上面步骤操作完成之后，页面仍是黑色的，渲染不出效果。因为我们还没有对它进行真正的渲染，我们需要使用一个叫做“渲染循环”（render loop）或者“动画循环”（animater loop）的东西。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(animate);</span><br><span class="line">    renderer.<span class="title function_">render</span>(scene, camera);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">animate</span>();</span><br></pre></td></tr></table></figure></div>

<p>这里我们创建了一个使渲染器能够在每次屏幕刷新时对场景进行绘制的循环（在大多数屏幕上，刷新率一般是 60次&#x2F;秒），但是不绝对，理想情况下是60次&#x2F;秒，电脑性能不好或者是代码写的处理逻辑太多消耗太多性能的话，肯定到不了60帧。</p>
<h2 id="5-1-Threejs-渲染场景抗锯齿"><a href="#5-1-Threejs-渲染场景抗锯齿" class="headerlink" title="5.1 Threejs 渲染场景抗锯齿"></a>5.1 Threejs 渲染场景抗锯齿</h2><p>通过之前的代码添加的模型可以正常展示了，但是在立方体边线渲染的时候会产生一种锯齿纹。</p>
<p>我们可以通过代码设置来优化以下实现抗锯齿效果。在初始化渲染器的时候可以设置参数，其中一个参数是 antialias，该参数的作用是决定是否执行抗锯齿。默认为 false。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化渲染器</span></span><br><span class="line"><span class="keyword">let</span> renderer = <span class="keyword">new</span> <span class="title class_">WebGlRenderer</span>(&#123;</span><br><span class="line">    <span class="attr">antialias</span>: <span class="literal">true</span>, <span class="comment">// 开启抗锯齿</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<p>除此之外，我们还可以设置渲染像素比为设备像素比来优化锯齿效果。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置像素比为设备的像素比，防止渲染模糊</span></span><br><span class="line">renderer.<span class="title function_">setPixelRatio</span>(<span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>)</span><br></pre></td></tr></table></figure></div>

<p>但是这些方式都是优化，不是彻底解决。系统默认是关闭的，需要通过上面代码手动开启，开启会影响性能。</p>
<h1 id="6-Threejs-深度冲突"><a href="#6-Threejs-深度冲突" class="headerlink" title="6 Threejs 深度冲突"></a>6 Threejs 深度冲突</h1><p>创建两个平面，都默认加载到坐标原点</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建平面1</span></span><br><span class="line"><span class="keyword">const</span> plantGeometry1 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PlaneGeometry</span>(<span class="number">80</span>, <span class="number">80</span>)</span><br><span class="line"><span class="keyword">const</span> plantMaterial1 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0xffff00</span>, </span><br><span class="line">    <span class="attr">side</span>: <span class="variable constant_">THREE</span>.<span class="property">DoubleSide</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> plane1 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(plantGeometry1, plantMaterial1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建平面2</span></span><br><span class="line"><span class="keyword">const</span> plantGeometry2 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">PlaneGeometry</span>(<span class="number">120</span>, <span class="number">120</span>)</span><br><span class="line"><span class="keyword">const</span> plantMaterial2 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">MeshBasicMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0x00ffff</span>, </span><br><span class="line">    <span class="attr">side</span>: <span class="variable constant_">THREE</span>.<span class="property">DoubleSide</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> plane2 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(plantGeometry2, plantMaterial2)</span><br></pre></td></tr></table></figure></div>

<p>另个平面显示的若隐若现，因为当两个面间隙很小时，电脑GPU精度是有限的，电脑分不清谁在前谁在后，不知道应该先渲染谁，就会出现深度冲突的情况。</p>
<h2 id="6-1-Threejs-解决深度冲突"><a href="#6-1-Threejs-解决深度冲突" class="headerlink" title="6.1 Threejs 解决深度冲突"></a>6.1 Threejs 解决深度冲突</h2><h3 id="6-1-1-拉开间距"><a href="#6-1-1-拉开间距" class="headerlink" title="6.1.1 拉开间距"></a>6.1.1 拉开间距</h3><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> plane1 = <span class="keyword">new</span> <span class="variable constant_">THREE</span>.<span class="title class_">Mesh</span>(plantGeometry1, plantMaterial1)</span><br><span class="line">plane2.<span class="property">position</span>.<span class="property">z</span> = <span class="number">0.1</span></span><br></pre></td></tr></table></figure></div>

<p>给两个平面之间添加一点距离</p>
<h3 id="6-1-2-设置-webgl-渲染器设置对数深度缓冲区"><a href="#6-1-2-设置-webgl-渲染器设置对数深度缓冲区" class="headerlink" title="6.1.2 设置 webgl 渲染器设置对数深度缓冲区"></a>6.1.2 设置 webgl 渲染器设置对数深度缓冲区</h3><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> renderer = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">WebGLRenderer</span>(&#123;</span><br><span class="line">    <span class="attr">antialias</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">logarithmicDepthBuffer</span>: <span class="literal">true</span> <span class="comment">// 设置深度缓冲区</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<p>注意：如果两个面间隙过小，或者重合，设置webgl渲染器也是无效的，这种方案是对深度冲突的优化，不是解决。</p>
<h1 id="7-Threejs-三维坐标系"><a href="#7-Threejs-三维坐标系" class="headerlink" title="7 Threejs 三维坐标系"></a>7 Threejs 三维坐标系</h1><p>在 Threejs 中渲染三维模型时，当我们使用 scene.add 将模型添加到场景中，模型默认添加在坐标系原点，也就是（0, 0, 0）处。我们可以使用辅助坐标系进行辅助查看。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入三维坐标系</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AxesHelper</span> &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"><span class="comment">// 实例化一个三维坐标轴，辅助坐标轴长度为 5</span></span><br><span class="line"><span class="keyword">const</span> axesHelper = <span class="keyword">new</span> <span class="title class_">AxesHelper</span>(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// 添加到三维场景</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">scene</span>.<span class="title function_">add</span>(axesHelper)</span><br></pre></td></tr></table></figure></div>

<p>注意：Threejs 坐标系没有明确的单位，但是模型设计工具可能有，所以说在设计模型的时候需要与美术提前确定好单位。</p>
<h2 id="7-1-Three-js-模型位置设置"><a href="#7-1-Three-js-模型位置设置" class="headerlink" title="7.1 Three.js 模型位置设置"></a>7.1 Three.js 模型位置设置</h2><p>如果不想让立方体添加在坐标原点可以通过位置设置，修改模型的初始位置。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改模型位置</span></span><br><span class="line">mesh.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>) <span class="comment">// x 轴设置为3</span></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line">mesh.<span class="property">position</span>.<span class="property">x</span> = <span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<p>除了位置可以设置之外，还可以对立方体的缩放、旋转进行设置。</p>
<h1 id="8-Threejs-光源"><a href="#8-Threejs-光源" class="headerlink" title="8 Threejs 光源"></a>8 Threejs 光源</h1><h2 id="8-1-Threejs-光源对物体的影响"><a href="#8-1-Threejs-光源对物体的影响" class="headerlink" title="8.1 Threejs 光源对物体的影响"></a>8.1 Threejs 光源对物体的影响</h2><p>实际生活中物体表面的明暗效果是会受到光照的影响。在 threejs 中，用网格模型 Mesh 模拟生活中的物体。在 threejs 提供的材质里面，有受光照影响的材质和不受光照影响的材质。</p>
<p>之前编写的代码中，我们没有在场景中添加光线但是模型仍然可以看见，是因为我们使用了 MeshBasicMaterial 材质（不受光照影响的材质）。</p>
<img lazyload src="/images/loading.svg" data-src="/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/3.png" class>

<p>使用一个受光照影响的材质：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个材质对象Material，材质受光照影响</span></span><br><span class="line"><span class="keyword">const</span> material = <span class="keyword">new</span> <span class="title class_">MeshLambertMaterial</span>(&#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="number">0xff0000</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="8-2-Threejs-光源的使用"><a href="#8-2-Threejs-光源的使用" class="headerlink" title="8.2 Threejs 光源的使用"></a>8.2 Threejs 光源的使用</h2><p>当使用 MeshLamberMaterial 材质时，会受到光线的影响，我们代码里面如果没有设置光线，则使用 MeshLamberMaterial 材质修饰的模型不可见，这个时候，我们添加光线后，便可以看见。</p>
<img lazyload src="/images/loading.svg" data-src="/2024/08/11/%E5%89%8D%E7%AB%AF/WebGL/threejs-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/4.png" class>

<h3 id="8-2-1-点光源"><a href="#8-2-1-点光源" class="headerlink" title="8.2.1 点光源"></a>8.2.1 点光源</h3><p>点光源 PointLight 可以类比为一个发光点（如灯泡）</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  导入点光源</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PointLight</span> &#125; <span class="keyword">from</span> <span class="string">&quot;three&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建点光源并设置白色光、光照强度200、最远照射距离10</span></span><br><span class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> <span class="title class_">PointLight</span>(<span class="number">0xffffff</span>, <span class="number">200</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置点光源的位置，x轴5，y轴5，z轴3</span></span><br><span class="line">light.<span class="property">position</span>.<span class="title function_">set</span>(<span class="number">5</span>, <span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将点光源添加到场景</span></span><br><span class="line">scene.<span class="title function_">add</span>(light)</span><br></pre></td></tr></table></figure></div>

<p>把点光源想象为一个电灯泡，在 3D 空间中，放的位置不同，模型的渲染效果就不一样。</p>
<p>注意光源位置尺寸大小：如果希望光源照在模型的外表面，那就需要把光源放在模型的外面。</p>
<h1 id="9-Threejs-相机控件-OrbitControls"><a href="#9-Threejs-相机控件-OrbitControls" class="headerlink" title="9 Threejs 相机控件 OrbitControls"></a>9 Threejs 相机控件 OrbitControls</h1><p>开发调试代码或者展示模型的时候，可以通过相机控件 OrbitControls 实现旋转缩放预览效果，通过鼠标来旋转场景、缩放场景、移动场景。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入相机空间（轨道控制器）</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">OrbitControls</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/addons/controls/OrbitControls.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建相机控件</span></span><br><span class="line"><span class="keyword">const</span> controls = <span class="keyword">new</span> <span class="title class_">OrbitControls</span>(camera, renderer.<span class="property">domElement</span>)</span><br></pre></td></tr></table></figure></div>

<p>【默认使用规则】</p>
<ul>
<li>旋转：拖动鼠标左键 THREE.MOUSE.ROTATE</li>
<li>缩放：滚动鼠标中键 THREE.MOUSE.DOLLY</li>
<li>平移：拖动鼠标右键 THREE.MOUSE.PAN</li>
</ul>
<p>可以通过设置修改鼠标键的功能项：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">controls.<span class="property">mouseButtons</span> = &#123;</span><br><span class="line">    <span class="attr">LEFT</span>: <span class="literal">null</span>,	<span class="comment">// 左键无功能</span></span><br><span class="line">    <span class="attr">MIDDLE</span>: <span class="variable constant_">MOUSE</span>.<span class="property">DOLLY</span>, <span class="comment">// 中键缩放</span></span><br><span class="line">    <span class="attr">RIGHT</span>: <span class="variable constant_">MOUSE</span>.<span class="property">ROTATE</span> <span class="comment">// 右键旋转</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>在相机控件变化的时候，可以使用监听事件来获取当前场景或者是相机数据，方便我们调试相机视角。比如，当我们想设置相机拍摄某个视角，但是又无法确定项目应该设置的最佳位置时，我们可以通过相机控件手动移动到目标位置，然后就可以通过变化事件监听，看到当前相机位置。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">controls.<span class="title function_">addEventListener</span>(<span class="string">&#x27;change&#x27;</span>, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 浏览器控制台查看相机位置变化</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;camera.position&#x27;</span>, camera.<span class="property">position</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<h1 id="10-Threejs-布局自适应"><a href="#10-Threejs-布局自适应" class="headerlink" title="10 Threejs 布局自适应"></a>10 Threejs 布局自适应</h1><p>在上面案例中，我们想让挂载的 DOM 自适应页面的变化，比如我们的 DOM 使用百分比布局，当浏览器窗体拖宽的时候 threejs 渲染的区域不能很好的自适应。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// onresize 事件会在窗口被调整大小时发生</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 重置渲染器输出画布 canvas 尺寸</span></span><br><span class="line">    renderer.<span class="title function_">setSize</span>(dom.<span class="property">offsetWidth</span>, dom.<span class="property">offsetHeight</span>);</span><br><span class="line">    <span class="comment">// 全屏情况下：设置观察范围长宽比 aspect 为窗口宽高比</span></span><br><span class="line">    camera.<span class="property">aspect</span> = dom.<span class="property">offsetWidth</span> / dom.<span class="property">offsetHeight</span>;</span><br><span class="line">    <span class="comment">// 渲染器执行 render 方法的时候会读取相机对象的投影矩阵属性 projectionMatrix</span></span><br><span class="line">    <span class="comment">// 但是不会每渲染一帧，就通过相机的属性计算投影矩阵（节约计算资源）</span></span><br><span class="line">    <span class="comment">// 如果相机的一些属性发生了变化，需要执行 updateProjectionMatrix() 方法更新相机的投影矩阵</span></span><br><span class="line">    camera.<span class="title function_">updateProjectionMatrix</span>();</span><br><span class="line">    <span class="comment">// 如果使用了 OrbitControls，则必须在摄像机的变换发生任何手动改变后更新 OrbitControls</span></span><br><span class="line">    controls.<span class="title function_">update</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="11-Threejs-克隆-clone-和-复制-copy"><a href="#11-Threejs-克隆-clone-和-复制-copy" class="headerlink" title="11 Threejs 克隆.clone() 和 复制.copy()"></a>11 Threejs 克隆.clone() 和 复制.copy()</h1><p>克隆<code>.clone()</code>、复制<code>.copy()</code>是 threejs 很多对象都具有的方法，比如三维向量对象 Vector3、网络模型 Mesh、几何体、材质。</p>
<p>克隆<code>.clone()</code> 简单说就是复制一个和原对象一样的新对象，但它不是深度拷贝</p>
<p>复制<code>.copu()</code>简单说就是把一个对象属性的属性值赋值给另一个对象</p>
<p>对材质的影响：</p>
<ul>
<li>当一个场景中模型使用同一套材质时，修改其中任意一个模型的材质，其余材质均被修改。</li>
<li>当一个场景中模型使用各自创建的材质，修改其中任意一个模型材质，不会对其它模型材质造成影响。</li>
<li>当使用<code>clone</code>克隆某一个模型时，其材质是共享的原模型材质，修改材质后对原模型材质有影响。</li>
</ul>
<h1 id="12-Threejs-建模"><a href="#12-Threejs-建模" class="headerlink" title="12 Threejs 建模"></a>12 Threejs 建模</h1><p>对于简单的立方体、球体等模型，可以通过 threejs 的几何体相关 API 快速实现，不过复杂的模型，比如一辆轿车、一栋房子、一个仓库，一般需要通过 3D 建模软件来实现。</p>
<p>3D 美术常用的三维建模软件，比如 Blender、3dsmax、C4D、maya 等。</p>
<p>一个公司对于三维开发的分工：</p>
<ul>
<li>3D 美术：使用三维建模软件绘制 3D 模型，导出 gltf 等常见格式。</li>
<li>2D 美术：根据三维模型设置贴图。</li>
<li>WebGL 开发：加载解析三维软件导出的三维模型。比如使用 Blender 三维建模软件导出 gltf 格式模型，然后再通过 threejs 加载三维模型。</li>
</ul>
<h2 id="12-1-Threejs-GLTF-模型解释"><a href="#12-1-Threejs-GLTF-模型解释" class="headerlink" title="12.1 Threejs GLTF 模型解释"></a>12.1 Threejs GLTF 模型解释</h2><p>GLTF 格式是新 2015 发布的三维模型格式，随着物联网、WebGL、5G的进一步发展，会有越来越多的互联网项目 Web 端引入 3D 元素。</p>
<p>不仅 threejs，其它的 WebGL 三维引擎 cesium、babylonjs 都对 gltf 格式有良好的支持。</p>
<h2 id="12-2-Threejs-加载-gltf-模型"><a href="#12-2-Threejs-加载-gltf-模型" class="headerlink" title="12.2 Threejs 加载 gltf 模型"></a>12.2 Threejs 加载 gltf 模型</h2><p>GLTFLoader 是 threejs 的一个扩展库，专门用来加载 gltf 格式模型加载器。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入模型加载器</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">GLTFLoader</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/addons/loaders/GLTFLoader.js&#x27;</span></span><br><span class="line"><span class="comment">// 实例化一个 gltf 的加载器对象</span></span><br><span class="line"><span class="keyword">let</span> loader = <span class="keyword">new</span> <span class="title class_">GLTFLoader</span>()</span><br><span class="line"><span class="comment">// 加载 gltf 模型</span></span><br><span class="line">loader.<span class="title function_">load</span>(<span class="string">&quot;/static/models/model/model.gltf&quot;</span>, <span class="function">(<span class="params">gltf</span>) =&gt;</span> &#123;</span><br><span class="line">    scene.<span class="title function_">add</span>(gltf.<span class="property">scene</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="12-3-Threejs-雾化效果"><a href="#12-3-Threejs-雾化效果" class="headerlink" title="12.3 Threejs 雾化效果"></a>12.3 Threejs 雾化效果</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 场景开启雾化效果</span></span><br><span class="line">scene.<span class="property">fog</span> = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Fog</span>(<span class="number">0x000000</span>, <span class="number">650</span>, <span class="number">900</span>)</span><br></pre></td></tr></table></figure></div>

<p>场景的雾化效果，是针对于相机的。三个参数分别是：雾化颜色、起始位置、结束位置</p>
<p>如果渲染器背景为黑色，无特殊情况下，建议使用相同的颜色作为雾化效果。</p>
<h1 id="13-Threejs-射线控制器-Raycaster"><a href="#13-Threejs-射线控制器-Raycaster" class="headerlink" title="13 Threejs 射线控制器 Raycaster"></a>13 Threejs 射线控制器 Raycaster</h1><p>光线投射用于进行鼠标拾取（在三维空间中计算出鼠标移过了什么物体）。</p>
<p>在二维平面，点击一个按钮很简单，因为屏幕是平面的，页面也是平面的，根据 X、Y 就可以定位元素位置。</p>
<p>在三维，渲染的是一个立体的场景，不能单纯通过电脑屏幕的 X、Y 来获取元素位置，因为三维存在 Z 轴。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例化射线控制器</span></span><br><span class="line"><span class="keyword">let</span> raycaster = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Raycaster</span>()</span><br></pre></td></tr></table></figure></div>

<p>射线发射器 Raycaster 会根据鼠标在二维屏幕中点击的位置，结合三维场景和相机数据，从屏幕向鼠标点击的方向发出一条射线，把被射线穿过模型返回成一个列表，列表的顺序就是射线穿过模型的先后顺序。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建鼠标点击事件获取鼠标点击位置</span></span><br><span class="line">renderer.<span class="property">domElement</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">    x = event.<span class="property">offsetX</span></span><br><span class="line">    y = event.<span class="property">offsetY</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<p>射线控制器创建完成，它有一个<code>setFromCamera</code>方法，用来通过相机和鼠标位置更新射线，需要传入两个参数，分别是 在标准化设备坐标中鼠标的二维坐标 和 场景。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raycaster.<span class="title function_">setFromCamera</span>(mouse, camera)</span><br></pre></td></tr></table></figure></div>

<p>在监听鼠标点击事件获取的坐标，是相对于屏幕的。标准化设备坐标中鼠标的二维坐标是 threejs 视角的鼠标位置，这个位置和我们通过点击事件获取出来的相对于屏幕的鼠标位置是不一样的。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">对于 three.<span class="property">js</span> 而言，它的原点就是屏幕宽度的一半和屏幕高度的一半。所以：</span><br><span class="line">横轴：(x - width / <span class="number">2</span>) / (width / <span class="number">2</span>)</span><br><span class="line">纵轴：(height / <span class="number">2</span> - y) / (height / <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">化简以下就是：</span><br><span class="line">x / width * <span class="number">2</span> - <span class="number">1</span></span><br><span class="line">-y * <span class="number">2</span> / height + <span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<p>通过上面化简的公式，就可以将获取到的鼠标坐标转化为 threejs 坐标：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Sx</span> = event.<span class="property">clientX</span>; <span class="comment">// 获取鼠标x轴坐标</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Sy</span> = event.<span class="property">clientY</span>; <span class="comment">// 获取鼠标y轴坐标</span></span><br><span class="line"><span class="keyword">let</span> x = (<span class="title class_">Sx</span> / dom.<span class="property">offsetWidth</span>) * <span class="number">2</span> - <span class="number">1</span>; <span class="comment">// 转换x坐标</span></span><br><span class="line"><span class="keyword">let</span> y = -(<span class="title class_">Sy</span> / dom.<span class="property">offsetHeight</span>) * <span class="number">2</span> - <span class="number">1</span>; <span class="comment">// 转换y坐标</span></span><br><span class="line"><span class="keyword">let</span> raycaster = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Raycaster</span>(); <span class="comment">// 射线控制器</span></span><br><span class="line">raycaster.<span class="title function_">setFromCamera</span>(<span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector2</span>(x, y), camera); <span class="comment">// 通过相机和鼠标位置更新射线</span></span><br></pre></td></tr></table></figure></div>

<p>Raycaster 射线控制器还有一个方法叫<code>intersectObjects</code>，它的作用就是获取被射线穿过的模型数量。它需要传递一个参数，是检测和射线相交的一组物体。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取射线穿过模型列表</span></span><br><span class="line"><span class="keyword">const</span> intersection = raycaster.<span class="title function_">intersectObjects</span>(scene.<span class="property">children</span>)</span><br></pre></td></tr></table></figure></div>

<p>它返回的是一个按照被射线穿过的模型顺序组装起来的数组，场景中添加的东西，都会被检测到，比如辅助线这些。</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(intersects.<span class="property">length</span> &gt; <span class="number">0</span>) &#123; <span class="comment">// 如果存在穿过的模型</span></span><br><span class="line">    <span class="keyword">if</span>(chooseMesh) &#123; <span class="comment">// 如果之前有设置了颜色的模型</span></span><br><span class="line">        chooseMesh.<span class="property">material</span>.<span class="property">color</span>.<span class="title function_">set</span>(<span class="number">0xffffff</span>); <span class="comment">// 恢复之前颜色</span></span><br><span class="line">    &#125;</span><br><span class="line">    chooseMesh = intersects[<span class="number">0</span>].<span class="property">object</span>; <span class="comment">// 修改被设置的模型为射线穿过的第一个模型</span></span><br><span class="line">   	chooseMesh.<span class="property">material</span>.<span class="property">color</span>.<span class="title function_">set</span>(<span class="number">0xffff00</span>); <span class="comment">// 将穿过的第一个模型设置为黄色</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="14-Threejs-CSS-2D-渲染器-CSS2DRenderer"><a href="#14-Threejs-CSS-2D-渲染器-CSS2DRenderer" class="headerlink" title="14 Threejs CSS 2D 渲染器 CSS2DRenderer"></a>14 Threejs CSS 2D 渲染器 CSS2DRenderer</h1><p>通过 CSS2DRenderer 可以把 HTML 元素作为标签标注三维场景。但是注意它支持100%的浏览器缩放比例正常运行。在此过程中，需要将两个库导入一下：<code>CSS2DRenderer</code>、<code>CSS2DObject</code>。</p>
<p>导入的方式很简单：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSS2DRenderer</span>, <span class="title class_">CSS2DObject</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/addons/renderers/CSS2DRenderer.js&#x27;</span></span><br></pre></td></tr></table></figure></div>

<p>如果希望将三维物体和基于HTML的标签相结合，则这一渲染器将十分有用。在这里，各个DOM元素也被包含到一个 CSS2DObject 实际中，并被添加到场景图中。</p>
<p>它允许开发者将HTML元素作为标签标注到三维场景中，这对于在三维地图或者图形中添加文本标签特别有用。CSS2DRenderer 是 CSS3DRenderer 的简化版本，它主要支持位移变换，这意味着可以使用它来在三维空间中定位HTML元素，但是不支持旋转或缩放等其它三维变换。</p>
<h2 id="14-1-CSS2DRenderer-创建"><a href="#14-1-CSS2DRenderer-创建" class="headerlink" title="14.1 CSS2DRenderer 创建"></a>14.1 CSS2DRenderer 创建</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 CSS2 的渲染器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createCSS2DRendererFun</span>(<span class="params">dom</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> labelRenderer = <span class="keyword">new</span> <span class="title class_">CSS2DRenderer</span>();</span><br><span class="line">    <span class="comment">// 设置渲染器大小</span></span><br><span class="line">    labelRenderer.<span class="title function_">setSize</span>(dom.<span class="property">offsetWidth</span>, dom.<span class="property">offsetHeight</span>);</span><br><span class="line">    labelRenderer.<span class="property">domElement</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>;</span><br><span class="line">    labelRenderer.<span class="property">domElement</span>.<span class="property">style</span>.<span class="property">top</span> = <span class="string">&#x27;0px&#x27;</span>;</span><br><span class="line">    labelRenderer.<span class="property">domElement</span>.<span class="property">style</span>.<span class="property">pointerEvents</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    dom.<span class="title function_">appendChild</span>(labelRenderer.<span class="property">domElement</span>);</span><br><span class="line">    <span class="keyword">return</span> labelRenderer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>上述方法中创建了一个 CSS2DRenderer 渲染器，设置渲染器的大小、属性、挂载位置，最后返回。</p>
<p>这个渲染器和渲染三维场景的渲染器不是一个渲染器，可以简单的理解成，把这个渲染器盖在了三维场景渲染器的上方，用来渲染我们后期需要添加的 HTML 标签。</p>
<p>因为案例的三维场景占据整个屏幕，所以在这里直接挂载在 dom 上面。</p>
<h2 id="14-2-CSS2DObject-介绍"><a href="#14-2-CSS2DObject-介绍" class="headerlink" title="14.2 CSS2DObject 介绍"></a>14.2 CSS2DObject 介绍</h2><p>CSS2DObject 是 three.js 中用于在 3D 场景里渲染 HTML 元素的类。</p>
<ul>
<li>HTML 元素包装：它允许开发者将 HTML 元素包装成可以在 3D 场景中渲染的对象。</li>
<li>场景连接：通过 CSS2DObject，HTML 元素可以与 three.js 中的场景连接，这意味着元素可以根据物体的位置和场景的相机位置自动定位和渲染。</li>
<li>位置设置：开发者可以通过设置 CSS2DObject 的 position 属性来定义 HTML 元素在 3D 空间中的位置，也可以获取 Mesh（网格）的世界坐标来确定标签的位置。</li>
<li>信息展示：CSS2DObject 常与 CSS2DRenderer 一起使用，用于在 Three.js 中绘制 2D 效果的标签，这对于展示一些场景相关信息非常有用。</li>
</ul>
<h2 id="14-3-CSS2DObject-创建"><a href="#14-3-CSS2DObject-创建" class="headerlink" title="14.3 CSS2DObject 创建"></a>14.3 CSS2DObject 创建</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 html 标签</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tag</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="comment">// 创建 div 标签</span></span><br><span class="line">    <span class="keyword">let</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    <span class="comment">// 设置标签显示内容</span></span><br><span class="line">    div.<span class="property">innerHTML</span> = name</span><br><span class="line">    <span class="comment">// 添加 class</span></span><br><span class="line">    div.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;tag&quot;</span>)</span><br><span class="line">    <span class="comment">// 创建 CSS2DObject 对象</span></span><br><span class="line">    <span class="keyword">var</span> label = <span class="keyword">new</span> <span class="title class_">CSS2DObject</span>(div)</span><br><span class="line">    <span class="comment">// 返回 CSS2DObject 对象</span></span><br><span class="line">    <span class="keyword">return</span> label</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>上面提供了一个方法用来创建一个 HTML 标签，设置标签的展示内容，并且最终导出一个 CSS2DObject 对象。</p>
<p>当然 HTML 的标签我们依旧可以通过 CSS 样式进行修饰。</p>
<div class="highlight-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tag</span> &#123;</span><br><span class="line">    backgroud-<span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="14-4-模型添加-2D-标签"><a href="#14-4-模型添加-2D-标签" class="headerlink" title="14.4 模型添加 2D 标签"></a>14.4 模型添加 2D 标签</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> group = gltf.<span class="property">scene</span>.<span class="title function_">getObjectByName</span>(<span class="string">&#x27;1&#x27;</span>)；</span><br><span class="line">group.<span class="title function_">traverse</span>(<span class="function">(<span class="params">obj</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(obj.<span class="property">type</span> === <span class="string">&#x27;Mesh&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> label = <span class="title function_">tag</span>(obj.<span class="property">name</span>)</span><br><span class="line">        <span class="keyword">let</span> v3 = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>()</span><br><span class="line">        obj.<span class="title function_">getWorldPosition</span>(v3)</span><br><span class="line">        <span class="keyword">if</span>(obj.<span class="property">parent</span>.<span class="property">name</span> === <span class="string">&#x27;2&#x27;</span>) &#123;</span><br><span class="line">            v3.<span class="property">y</span> += <span class="number">20</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj.<span class="property">parent</span>.<span class="property">name</span> === <span class="string">&#x27;3&#x27;</span>) &#123;</span><br><span class="line">            v3.<span class="property">y</span> += <span class="number">39</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj.<span class="property">parent</span>.<span class="property">name</span> === <span class="string">&#x27;4&#x27;</span>) &#123;</span><br><span class="line">            v3.<span class="property">y</span> += <span class="number">23</span></span><br><span class="line">        &#125;</span><br><span class="line">        label.<span class="property">position</span>.<span class="title function_">copy</span>(v3)</span><br><span class="line">        model.<span class="title function_">add</span>(label)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<p>拿到模型之后可以通过递归遍历拿到所有的模型，之后给相应的模型添加label</p>
<p>getWorldPosition：用于获取某个对象在世界坐标系中的位置。</p>
<h2 id="14-5-场景展示-HTML-标签"><a href="#14-5-场景展示-HTML-标签" class="headerlink" title="14.5 场景展示 HTML 标签"></a>14.5 场景展示 HTML 标签</h2><p>在场景中展示 HTML 标签和渲染三维一样，首先创建一个渲染器：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加 CSS2DRenderer 渲染器</span></span><br><span class="line"><span class="keyword">const</span> labelRenderer = <span class="title function_">createCSS2DRendererFun</span>(dom)</span><br></pre></td></tr></table></figure></div>

<p>在每一帧切换的时候更新一下：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">animate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    labelRenderer.<span class="title function_">setSize</span>(dom.<span class="property">offsetWidth</span>, dom.<span class="property">offsetHeight</span>)</span><br><span class="line">    labelRenderer.<span class="title function_">render</span>(scene, camera)</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">requestAnimationFrame</span>(animate)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">animate</span>()</span><br></pre></td></tr></table></figure></div>

<p>此时标签已经添加到场景进行展示，标签不随相机自动变换大小，并且标签正面始终朝向镜头。</p>
<h1 id="15-Threejs-CSS-3D-渲染器-CSS3DRenderer"><a href="#15-Threejs-CSS-3D-渲染器-CSS3DRenderer" class="headerlink" title="15 Threejs CSS 3D 渲染器 CSS3DRenderer"></a>15 Threejs CSS 3D 渲染器 CSS3DRenderer</h1><p>CSS3DRenderer 是 Threejs 库中的一个组件，用于在 WebGL 场景中渲染 HTML 元素。它允许开发者将 DOM 元素转换为三维对象，并使用 CSS 变换来实现三维效果。</p>
<p>导入：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSS3DRenderer</span>, <span class="title class_">CSS3DObject</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/addons/renderers/CSS3DRenderer.js&#x27;</span></span><br></pre></td></tr></table></figure></div>

<p>CSS3DRenderer,CSS3DObject 的用法，和 2D 几乎是完全一样的</p>
<h2 id="15-1-Threejs-CSS-3D-渲染器初始化"><a href="#15-1-Threejs-CSS-3D-渲染器初始化" class="headerlink" title="15.1 Threejs CSS 3D 渲染器初始化"></a>15.1 Threejs CSS 3D 渲染器初始化</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个 CSS3 的渲染器</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createCSS3DRendererFun</span>(<span class="params">dom</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> labelRenderer = <span class="keyword">new</span> <span class="title class_">CSS3DRenderer</span>()</span><br><span class="line">    labelRenderer.<span class="title function_">setSize</span>(dom.<span class="property">offsetWidth</span>, dom.<span class="property">offsetHeight</span>)</span><br><span class="line">    labelRenderer.<span class="property">domElement</span>.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span></span><br><span class="line">    labelRenderer.<span class="property">domElement</span>.<span class="property">style</span>.<span class="property">top</span> = <span class="string">&#x27;0px&#x27;</span></span><br><span class="line">    labelRenderer.<span class="property">domElement</span>.<span class="property">style</span>.<span class="property">pointerEvents</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    dom.<span class="title function_">appendChild</span>(labelRenderer.<span class="property">domElement</span>)</span><br><span class="line">    <span class="keyword">return</span> labelRenderer</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="15-2-CSS3DObject-对象初始化"><a href="#15-2-CSS3DObject-对象初始化" class="headerlink" title="15.2 CSS3DObject 对象初始化"></a>15.2 CSS3DObject 对象初始化</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建 html 标签</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tag3D</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> div  = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">    div.<span class="property">innerHTML</span> = name</span><br><span class="line">    div.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;tag&quot;</span>)</span><br><span class="line">    <span class="keyword">var</span> label = <span class="keyword">new</span> <span class="title class_">CSS3DObject</span>(div)</span><br><span class="line">    div.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    label.<span class="property">scale</span>.<span class="title function_">set</span>(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">1</span>)</span><br><span class="line">    label.<span class="title function_">ratateY</span>(<span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> label</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="15-3-CSS3DRenderer-使用"><a href="#15-3-CSS3DRenderer-使用" class="headerlink" title="15.3 CSS3DRenderer 使用"></a>15.3 CSS3DRenderer 使用</h2><p>标签添加到场景后，标签会随相机自动变换大小，不会一直朝向镜头</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加 CSS3DRenderer 渲染器</span></span><br><span class="line"><span class="keyword">const</span> labelRenderer = <span class="title function_">createCSS3DRendererFun</span>(dom)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> group = <span class="title class_">Mathia</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">group.<span class="title function_">traverse</span>(<span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(obj.<span class="property">type</span> === <span class="string">&#x27;Mesh&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> label = <span class="title function_">tag3D</span>(obj.<span class="property">name</span>)</span><br><span class="line">        <span class="keyword">let</span> v3 = <span class="keyword">new</span> <span class="title class_">Three</span>.<span class="title class_">Vector3</span>()</span><br><span class="line">        obj.<span class="title function_">getWorldPosition</span>(v3)</span><br><span class="line">        <span class="keyword">if</span> (obj.<span class="property">parent</span>.<span class="property">name</span> === <span class="string">&#x27;平房仓&#x27;</span>) &#123;</span><br><span class="line">        v3.<span class="property">y</span> += <span class="number">20</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj.<span class="property">parent</span>.<span class="property">name</span> === <span class="string">&#x27;立筒仓&#x27;</span>) &#123;</span><br><span class="line">        v3.<span class="property">y</span> += <span class="number">39</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj.<span class="property">parent</span>.<span class="property">name</span> === <span class="string">&#x27;浅圆仓&#x27;</span>) &#123;</span><br><span class="line">        v3.<span class="property">y</span> += <span class="number">23</span></span><br><span class="line">      &#125;</span><br><span class="line">      label.<span class="property">position</span>.<span class="title function_">copy</span>(v3);</span><br><span class="line">      model.<span class="title function_">add</span>(label);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="15-4-CSS3DSprite-精灵"><a href="#15-4-CSS3DSprite-精灵" class="headerlink" title="15.4 CSS3DSprite 精灵"></a>15.4 CSS3DSprite 精灵</h2><p>和 CSS3DObject 的特性一样，但是会自动朝向镜头</p>
<p>导入：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSS3DRenderer</span>, <span class="title class_">CSS3DObject</span>, <span class="title class_">CSS3DSprite</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;three/addons/renderers/CSS3DRenderer.js&#x27;</span></span><br></pre></td></tr></table></figure></div>

<p>和 3D 标签的唯一区别就是，在创建标签的时候使用 CSS3DSprite</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> label = <span class="keyword">new</span> <span class="title class_">CSS3DSprite</span>(div)</span><br></pre></td></tr></table></figure></div>

<h1 id="16-Gsap-动画"><a href="#16-Gsap-动画" class="headerlink" title="16 Gsap 动画"></a>16 Gsap 动画</h1><p>three.js 结合 Gsap(GreenSock Animation Platform) 可以创建丰富的 3D 动画效果</p>
<p>Gsap 是一个功能强大的 JavsScript 动画库，它支持各种动画需求，包括 CSS、SVG、Canvas，以及 WebGL 等。</p>
<p>官网：<a class="link" target="_blank" rel="noopener" href="https://gsap.com/">https://gsap.com/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>安装：</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gsap</span><br></pre></td></tr></table></figure></div>

<p>使用案例：</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gsap.<span class="title function_">to</span>(camera.<span class="property">position</span>, &#123;</span><br><span class="line">    <span class="attr">x</span>: -<span class="number">1.5</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">8.0</span>,</span><br><span class="line">    <span class="attr">z</span>: -<span class="number">15.2</span>,</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">1.5</span>,</span><br><span class="line">    <span class="attr">ease</span>: <span class="string">&quot;pow&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

















<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p><a class="link" target="_blank" rel="noopener" href="https://wjw1014.blog.csdn.net/article/details/137536937">https://wjw1014.blog.csdn.net/article/details/137536937 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>

        </div>

        
            <div class="post-copyright-info w-full my-8 px-2 sm:px-6 md:px-8">
                <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> threejs 基础知识点</li>
        <li><strong>作者:</strong> wawn</li>
        <li><strong>创建于
                :</strong> 2024-08-11 20:20:20</li>
        
            <li>
                <strong>更新于
                    :</strong> 2024-08-16 19:55:14
            </li>
        
        <li>
            <strong>链接:</strong> https://wawnwn.github.io/2024/08/11/前端/WebGL/threejs-基础知识点/
        </li>
        <li>
            <strong>
                版权声明:
            </strong>
            

            
                本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0">CC BY-NC-SA 4.0</a> 进行许可。
            
        </li>
    </ul>
</div>

            </div>
        

        

        

        
            <div class="article-nav my-8 flex justify-between items-center px-2 sm:px-6 md:px-8">
                
                    <div class="article-prev border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="prev"
                        rel="prev"
                        href="/2024/10/17/%E4%B9%90%E7%90%86/%E5%9F%BA%E7%A1%80%E4%B9%90%E7%90%86/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">基础乐理</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next border-border-color shadow-redefine-flat shadow-shadow-color-2 rounded-medium px-4 py-2 hover:shadow-redefine-flat-hover hover:shadow-shadow-color-2">
                        <a class="next"
                        rel="next"
                        href="/2024/08/06/%E5%89%8D%E7%AB%AF/WebGL/threejs%E5%9C%A8vue%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">threejs在vue项目中的基本使用</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
            <div class="comment-container px-2 sm:px-6 md:px-8 pb-8">
                <div class="comments-container mt-10 w-full ">
    <div id="comment-anchor" class="w-full h-2.5"></div>
    <div class="comment-area-title w-full my-1.5 md:my-2.5 text-xl md:text-3xl font-bold">
        评论
    </div>
    

        
            
    <div id="waline"></div>
    <script type="module" data-swup-reload-script>
      import { init } from '/js/libs/waline.mjs';

      function loadWaline() {
        init({
          el: '#waline',
          serverURL: 'https://example.example.com',
          lang: 'zh-CN',
          dark: 'body[class~="dark-mode"]',
          reaction: false,
          requiredMeta: ['nick', 'mail'],
          emoji: [],
          recaptchaV3Key: "wasd",
          
        });
      }

      if (typeof swup !== 'undefined') {
        loadWaline();
      } else {
        window.addEventListener('DOMContentLoaded', loadWaline);
      }
    </script>



        
    
</div>

            </div>
        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">目录</div>
        <div class="page-title">threejs 基础知识点</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-threejs-%E7%AE%80%E4%BB%8B"><span class="nav-text">1 threejs 简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-threejs-%E5%AE%89%E8%A3%85"><span class="nav-text">2 threejs 安装</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-threejs-%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">3 threejs 初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E5%88%9B%E5%BB%BA-dom-%E6%8C%82%E8%BD%BD"><span class="nav-text">3.1 创建 dom 挂载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Three-js-%E5%88%9B%E5%BB%BA%E5%9C%BA%E6%99%AF-Scene"><span class="nav-text">3.2 Three.js 创建场景 Scene</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-Three-js-%E5%88%9B%E5%BB%BA%E9%80%8F%E8%A7%86%E6%8A%95%E5%BD%B1%E7%9B%B8%E6%9C%BA-PerpectiveCamera"><span class="nav-text">3.3 Three.js 创建透视投影相机 PerpectiveCamera</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-Three-js-%E5%88%9B%E5%BB%BA%E6%B8%B2%E6%9F%93%E5%99%A8-WebGLRenderer"><span class="nav-text">3.4 Three.js 创建渲染器 WebGLRenderer</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Threejs-%E6%A8%A1%E5%9E%8B"><span class="nav-text">4 Threejs 模型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E5%B8%B8%E7%94%A8%E5%87%A0%E4%BD%95%E4%BD%93"><span class="nav-text">4.1 常用几何体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E5%B8%B8%E7%94%A8%E6%9D%90%E8%B4%A8"><span class="nav-text">4.2 常用材质</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Threejs-%E7%BD%91%E6%A0%BC%E6%A8%A1%E5%9E%8B-Mesh"><span class="nav-text">4.3 Threejs 网格模型 Mesh</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Threejs-%E6%B8%B2%E6%9F%93%E5%9C%BA%E6%99%AF"><span class="nav-text">5 Threejs 渲染场景</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-Threejs-%E6%B8%B2%E6%9F%93%E5%9C%BA%E6%99%AF%E6%8A%97%E9%94%AF%E9%BD%BF"><span class="nav-text">5.1 Threejs 渲染场景抗锯齿</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-Threejs-%E6%B7%B1%E5%BA%A6%E5%86%B2%E7%AA%81"><span class="nav-text">6 Threejs 深度冲突</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-Threejs-%E8%A7%A3%E5%86%B3%E6%B7%B1%E5%BA%A6%E5%86%B2%E7%AA%81"><span class="nav-text">6.1 Threejs 解决深度冲突</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-1-%E6%8B%89%E5%BC%80%E9%97%B4%E8%B7%9D"><span class="nav-text">6.1.1 拉开间距</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-2-%E8%AE%BE%E7%BD%AE-webgl-%E6%B8%B2%E6%9F%93%E5%99%A8%E8%AE%BE%E7%BD%AE%E5%AF%B9%E6%95%B0%E6%B7%B1%E5%BA%A6%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="nav-text">6.1.2 设置 webgl 渲染器设置对数深度缓冲区</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-Threejs-%E4%B8%89%E7%BB%B4%E5%9D%90%E6%A0%87%E7%B3%BB"><span class="nav-text">7 Threejs 三维坐标系</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-Three-js-%E6%A8%A1%E5%9E%8B%E4%BD%8D%E7%BD%AE%E8%AE%BE%E7%BD%AE"><span class="nav-text">7.1 Three.js 模型位置设置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-Threejs-%E5%85%89%E6%BA%90"><span class="nav-text">8 Threejs 光源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-Threejs-%E5%85%89%E6%BA%90%E5%AF%B9%E7%89%A9%E4%BD%93%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="nav-text">8.1 Threejs 光源对物体的影响</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-Threejs-%E5%85%89%E6%BA%90%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">8.2 Threejs 光源的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-1-%E7%82%B9%E5%85%89%E6%BA%90"><span class="nav-text">8.2.1 点光源</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-Threejs-%E7%9B%B8%E6%9C%BA%E6%8E%A7%E4%BB%B6-OrbitControls"><span class="nav-text">9 Threejs 相机控件 OrbitControls</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-Threejs-%E5%B8%83%E5%B1%80%E8%87%AA%E9%80%82%E5%BA%94"><span class="nav-text">10 Threejs 布局自适应</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-Threejs-%E5%85%8B%E9%9A%86-clone-%E5%92%8C-%E5%A4%8D%E5%88%B6-copy"><span class="nav-text">11 Threejs 克隆.clone() 和 复制.copy()</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-Threejs-%E5%BB%BA%E6%A8%A1"><span class="nav-text">12 Threejs 建模</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-Threejs-GLTF-%E6%A8%A1%E5%9E%8B%E8%A7%A3%E9%87%8A"><span class="nav-text">12.1 Threejs GLTF 模型解释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-2-Threejs-%E5%8A%A0%E8%BD%BD-gltf-%E6%A8%A1%E5%9E%8B"><span class="nav-text">12.2 Threejs 加载 gltf 模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-3-Threejs-%E9%9B%BE%E5%8C%96%E6%95%88%E6%9E%9C"><span class="nav-text">12.3 Threejs 雾化效果</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-Threejs-%E5%B0%84%E7%BA%BF%E6%8E%A7%E5%88%B6%E5%99%A8-Raycaster"><span class="nav-text">13 Threejs 射线控制器 Raycaster</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-Threejs-CSS-2D-%E6%B8%B2%E6%9F%93%E5%99%A8-CSS2DRenderer"><span class="nav-text">14 Threejs CSS 2D 渲染器 CSS2DRenderer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#14-1-CSS2DRenderer-%E5%88%9B%E5%BB%BA"><span class="nav-text">14.1 CSS2DRenderer 创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-2-CSS2DObject-%E4%BB%8B%E7%BB%8D"><span class="nav-text">14.2 CSS2DObject 介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-3-CSS2DObject-%E5%88%9B%E5%BB%BA"><span class="nav-text">14.3 CSS2DObject 创建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-4-%E6%A8%A1%E5%9E%8B%E6%B7%BB%E5%8A%A0-2D-%E6%A0%87%E7%AD%BE"><span class="nav-text">14.4 模型添加 2D 标签</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#14-5-%E5%9C%BA%E6%99%AF%E5%B1%95%E7%A4%BA-HTML-%E6%A0%87%E7%AD%BE"><span class="nav-text">14.5 场景展示 HTML 标签</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15-Threejs-CSS-3D-%E6%B8%B2%E6%9F%93%E5%99%A8-CSS3DRenderer"><span class="nav-text">15 Threejs CSS 3D 渲染器 CSS3DRenderer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#15-1-Threejs-CSS-3D-%E6%B8%B2%E6%9F%93%E5%99%A8%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">15.1 Threejs CSS 3D 渲染器初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-2-CSS3DObject-%E5%AF%B9%E8%B1%A1%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">15.2 CSS3DObject 对象初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-3-CSS3DRenderer-%E4%BD%BF%E7%94%A8"><span class="nav-text">15.3 CSS3DRenderer 使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#15-4-CSS3DSprite-%E7%B2%BE%E7%81%B5"><span class="nav-text">15.4 CSS3DSprite 精灵</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-Gsap-%E5%8A%A8%E7%94%BB"><span class="nav-text">16 Gsap 动画</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="nav-text">参考链接</span></a></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2024&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">wawn</a>
            
                
                <p class="post-count space-x-0.5">
                    <span>
                        共撰写了 60 篇文章
                    </span>
                    
                        <span>
                            共 363.4k 字
                        </span>
                    
                </p>
            
        </div>
        
            <script data-swup-reload-script src="https://cn.vercount.one/js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.7.1</a></span>
        </div>
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
            <script data-swup-reload-script>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="站内搜索您需要的内容..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    
<script src="/js/libs/Swup.min.js"></script>

<script src="/js/libs/SwupSlideTheme.min.js"></script>

<script src="/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/js/tools/imageViewer.js" type="module"></script>

<script src="/js/utils.js" type="module"></script>

<script src="/js/main.js" type="module"></script>

<script src="/js/layouts/navbarShrink.js" type="module"></script>

<script src="/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/js/layouts/categoryList.js" type="module"></script>



    
<script src="/js/tools/localSearch.js" type="module"></script>




    
<script src="/js/tools/codeBlock.js" type="module"></script>




    
<script src="/js/layouts/lazyload.js" type="module"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js" type="module"></script>








    
<script src="/js/libs/anime.min.js"></script>



<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/js/tools/tocToggle.js" type="module"></script>

<script src="/js/layouts/toc.js" type="module"></script>

<script src="/js/plugins/tabs.js" type="module"></script>

    
</div>


</body>
</html>
